


<%= render :partial => "trip", :object => @trip %>

<% if @trip.organized_by?(current_person) %>

  <%= form_for @invitation, :url => invite_trip_path, :method => :post do |f| %>
    <% if @invitation.errors.any? %>
      <div id="errorExplanation">
        <h2><%= pluralize(@invitation.errors.count, "error") %> prohibited this invitation from being sent:</h2>
        <ul>
          <% @invitation.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= f.label :email, "Enter email of user to invite:" %> <%= f.text_field :email %><%= f.submit "Invite" %>
  <% end %>

  <%= form_tag(generate_trip_arrangements_path(@trip), :method => :post) do %>
    <%= submit_tag "Generate Arrangements" %>
  <% end %>
<% end %>

<ul class="actions">
  <% if @trip.organized_by?(current_person)%>
    <li><%= link_to 'Edit', edit_trip_path(@trip) %></li>
  <% end %>
  <li><%= link_to 'Leave Trip', leave_trip_path(@trip), :confirm => 'Are you sure?', :method => :delete %></li>
  <li><%= link_to 'Participants', participants_trip_path(@trip) %></li>
  <% if current_person.invited_to?(@trip)#@trip.invitees.include?(current_person) %>
    <li><%= link_to "Join this trip", join_trip_path %></li>
  <% end %>
</ul>
